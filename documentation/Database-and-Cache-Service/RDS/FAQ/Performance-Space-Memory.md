# 性能/空间/内存

## 内存占用率长期处于90%以上，重启也无法释放的原因及解决办法

详细请查看[内存使用率](../Troubleshooting/Memory-Use-Rate.md)

## 我通过 SQL 语句查询 MySQL 数据库占用的空间比监控的硬盘空间总使用量小

如果您想看数据库实例的本地磁盘占用空间，请以监控里面的硬盘空间总使用量为准，通过 SQL 命令查询的数据库占用空间，由于 MySQL 中的 information_schema.tables 表信息并非是实时更新的，所以统计的结果会不准确的。

## 针对云数据库 MySQL 中的一个大表，删除了一些数据，但是通过监控图，数据空间磁盘占用并未发生变化

这是数据文件碎片空洞问题。在 InnoDB 执行删除数据时，已经删除的空间并不会回收，会造成很多文件空洞，导致监控图中的数据空间使用量并不会发生变化。优化方法：`OPTIMIZE TABLE <table>` 或者 `ALTER TABLE <table> ENGINE=Innodb` 来重建表空间。

## 实例重启后，云数据库 SQL Server 性能分析中看不到历史数据了

性能分析中的数据是保存在实例内存中。实例重启后，性能分析数据将丢失。 如果您有对历史数据分析的需求，可以使用以下两个OpenAPI将数据导出保存

- describeIndexPerformance
- describeQueryPerformance

## 我的存储空间包含哪些部分

云数据库 MySQL/Percona/MariaDB 存储空间包含以下部分：

- 用户数据空间：数据所占用的空间；比如每建一张空表就会占用 1M 空间，随着数据的插入，空间会一直增长。
- 系统数据空间：包括共享表空间，错误日志文件等；云数据库 MySQL/Percona/MariaDB 服务默认使用 InnoDB 引擎，在安装初始化的时候，会生成一个共享表空间，用来存放数据库的 redo log 和 undo log，以及数据字典。
- 日志文件空间：日志文件空间指的是 binlog 文件所占空间, 这是数据库运行过程中产生的空间，更新事务越多，空间占用就越大。

为了保证用户云数据库 MySQL/Percona/MariaDB 的正常使用，避免触发服务数据保护机制，京东云建议您的实例存储空间应当留有足够空间，防止存储空间不足，云数据库 RDS 实例变为只读。

