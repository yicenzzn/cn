# TiDB 数据复制介绍

TiDB 的数据复制可以将 TiDB 实例产生的增量数据同步到下游的TiDB，MySQL或者Kafka中。 TiDB 通过 TiCDC 节点拉取上游 TiKV 的数据变更日志，将数据解析为有序的行级变更数据输出到下游。
目前京东云 TiDB 5.3 极其以上版本可以支持数据复制。

## 适用场景
- 数据集成：支持其他系统订阅数据变更，能够为数据分析、大数据及其他业务提供数据源。
- 数据库灾备：可以用于同构数据库之间的灾备场景，能够在灾难发生时保证主备集群数据的最终一致性，目前该场景仅支持 TiDB 作为主备集群。

## 同步限制
使用 TiCDC 进行同步的时候，请注意以下相关限制要求以及暂不支持的场景。

### 有效索引的相关要求
TiCDC 只能同步至少存在一个有效索引的表，有效索引的定义如下：

- 主键 (PRIMARY KEY) 为有效索引。
- 同时满足下列条件的唯一索引 (UNIQUE INDEX) 为有效索引：
  - 索引中每一列在表结构中明确定义非空 (NOT NULL)。
  - 索引中不存在虚拟生成列 (VIRTUAL GENERATED COLUMNS)。

TiCDC 从 4.0.8 版本开始，可通过修改任务配置来同步没有有效索引的表，但在数据一致性的保证上有所减弱。具体使用方法和注意事项参考同步没有有效索引的表。

### 暂不支持的场景
目前 TiCDC 暂不支持的场景如下：

- 暂不支持单独使用 RawKV 的 TiKV 集群。
- 暂不支持在 TiDB 中创建 SEQUENCE 的 DDL 操作和 SEQUENCE 函数。在上游 TiDB 使用 SEQUENCE 时，TiCDC 将会忽略掉上游执行的 SEQUENCE DDL 操作/函数，但是使用 SEQUENCE 函数的 DML 操作可以正确地同步。
