# 创建资源
在消息队列 JCQ中，消息的生产和消费需要通过主题订阅的形式，故用户首先要创建消息主题（topic），发送消息到某个指定的消息主题，而消费者通过订阅该消费主题进行消息消费。

## 前提条件
- 已注册京东云账号，并完成实名认证，且保证账户处于正常状态，没有在黑名单中。如果还没有账号请 [注册](https://user.jdcloud.com/register)，并 [实名认证](https://uc.jdcloud.com/account/certify)。
- 因为产品的计费类型为按用量计费，请确认您的账户不能处于欠费状态。

## 注意事项
- 用户默认在一个region最多只能创建10个topic，如有需要可以提工单增加。
- 对于某个topic的订阅Consumer Group数量没有限制。
- 创建topic的时候需要选择namespace，支持用户选择默认的namespace，如用户需要自己创建namespace请参考namespace管理

## 步骤一：创建消费主题

1. 进入京东云控制台，菜单互联网中间件-消息队列 JCQ-Topic管理。
2. 首先选择想要创建资源的区域（比如华北），然后点击“新建”按钮，创建topic。
3. 创建topic中需要选择namespace、填写“topic名称”、topic类型、消息类型和填写备注。

### 说明：

1. 选择namespace时可以选择用户自己创建的或者是默认的，如果需要新建，则点击新建namespace，在新建窗口完成那namespace名称填写即可。namespace名称不允许重复。namespace名称长度 3-32 个字符，支持字母、数字、连字符(-)、下划线(_)。

2. topic名称为全局唯一，如果有相同名称的topic被创建，则无法创建成功。并且topic只能包含字母、数字、连字符(-)、下划线(_)、波形符 (~)或加号 (+)，长度 为3-64 个字符。
3. 消息类型为普通消息、事务消息、全局顺序消息和分区顺序消息。

- 普通消息：不保证先入先出（FIFO）的顺序消费，包含普通消息和延时消息。
- 事务消息：能达到分布式事务的最终一致。
- 全局顺序消息：消息的生产和消费按照消息的发布顺序进行（FIFO）。
- 分区顺序消息：同一个分区下，其消费者在消费消息的时候，严格按照生产者投递到该分区的顺序进行消费。分区顺序消息在保证了一定顺序性的同时，保留了分区机制提升性能。

## 步骤二：添加订阅

1. 在Topic管理页面中，找到想要订阅的topic，在操作中可以选择订阅。
2. 在添加订阅者中需要新建/绑定已有Consumer Group ID。
3. 填写取出消息隐藏时长、死信队列设置和最大接收次数等参数，如果无特殊需求可保持默认配置不变。

### 说明：

1. Consumer Group ID为全局唯一，如果有相同名称的Consumer Group ID被创建，则无法创建成功。并且Consumer Group ID只能包含字母、数字、连字符(-)和下划线(_)，长度7-64字符。
2. Consumer Group ID 和topic的关系是多对多关系（N：M），同一个Consumer Group ID可以订阅多个topic，同一个topic可以对应多个Consumer Group ID。
3. 取出消息隐藏时长为接收的消息对于其他消费者不可见的时间长度，范围：30秒-600秒 。
4. 死信队列设置参数决定是否开启topic的死信队列。
5. 最大接收次数是将消息发送到死信队列之前允许接收该消息的最大次数，范围：0-16次。

## 步骤三：创建 AccessKey和 SecretKey
在调用消息队列 JCQ的SDK或者openAPI进行消息的发送消费和管理操作时候，还需要验证用户的身份信息，即需要在控制台创建AccessKey和 SecretKey。
### 创建方法：
在京东云用户中心账户管理下的[AccessKey管理页面](https://uc.jdcloud.com/account/accesskey)申请AccessKey和SecretKey密钥对（简称AK/SK）。
AK/SK信息请妥善保管，如果遗失可能会造成非法用户使用此信息操作您在云上的资源，给你造成数据和财产损失。AK/SK密钥对允许启用、禁用，启用后可用其调用OpenAPI，禁用后不能用其调用OpenAPI。
