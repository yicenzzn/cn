# 分隔符提取模式

## 概述

分隔符日志是指单条日志可以根据指定的分隔符进行结构化提取的日志。每条日志以换行符作为结束的标志。由分隔符分割出来的日志内容作为字段的value，需要用户自己定义字段的key和字段的类型。

## 前置条件

1. 已创建日志集日志主题。
2. 日志源选择了业务应用日志，并完成了日志源的设置。
3. 进入日志预处理步骤。

## 操作步骤

1. 将键值提取模式切换至“分隔符”。
2. 选择日志的分隔符，如默认提供的分隔符不满足需求，可以选择自定义分隔符，输入用户自己的分隔符。
3. 输入或粘贴日志样例。
4. 点击“提取字段”，将会根据用户设置的分隔符对输入的日志样例进行分割。分割成功将会在日志提取字段列表中展示。如果失败，则可能是选择或输入的分隔符有误，也可能是输入的日志样例有误。
5. 用户需要自定义字段的key，默认所有字段的类型为string，需要用户按照实际情况选择字段的类型，仅数值类型的字段支持聚合计算。
6. 对于不需要存储和监控的字段，用户可直接在日志提取字段中删除。

[![img](https://raw.githubusercontent.com/jdcloudcom/cn/zhangwenjie-only/image/LogService/operationguide/Separator.jpg)](https://raw.githubusercontent.com/jdcloudcom/cn/zhangwenjie-only/image/LogService/operationguide/Separator.jpg)

## 注意事项

1. 用户自定义分隔符时，只支持3个ASCII字符。

2. 分隔符日志样例不可超过1K.

3. 提取的字段数量及类型的限制如下：字符串(String)类型的字段不能超过30个,整数(Integer)类型的字段不能超过20个,浮点数(Float)类型的字段不能超过20个,时间(Time)类型的字段不能超过5个,IP类型的字段不能超过5个。

4. 至少保留一个提取后的字段，不可删除所有提取的字段。

5. 日志时间：系统默认会使用日志的采集时间，如果用户将日志内容中的时间提取为timestamp字段，则会使用提取的时间作为日志时间，除非明确知道会发生什么，否则不要随意提取设置timestamp字段。

6. Time类型的字段需要用户设置时间解析格式，解析格式最多输入64个字符。

   支持设置的时间解析占位符列表如下：

   | 输入   | 例子             | 详情                                 |
   | ------ | ---------------- | ------------------------------------ |
   | `YY`   | 21               | 两位数年份                           |
   | `YYYY` | 2021             | 四位数年份                           |
   | `M`    | 1-12             | 月份，无前导零                       |
   | `MM`   | 01-12            | 月份，两位数，有前导零               |
   | `MMM`  | Jan-Dec          | 缩写的英文月份名称                   |
   | `MMMM` | January-December | 完整的英文月份名称                   |
   | `d`    | 1-31             | 日期，月份里的一天，无前导零         |
   | `dd`   | 01-31            | 日期，月份里的一天，两位数，有前导零 |
   | `H`    | 0-23             | 小时，24小时制，无前导零             |
   | `HH`   | 00-23            | 小时，24小时制，两位数，有前导零     |
   | `h`    | 1-12             | 小时，12小时制，无前导零             |
   | `hh`   | 01-12            | 小时，12小时制，两位数，有前导零     |
   | `m`    | 0-59             | 分钟，无前导零                       |
   | `mm`   | 00-59            | 分钟，两位数，有前导零               |
   | `s`    | 0-59             | 秒，无前导零                         |
   | `ss`   | 00-59            | 秒，两位数，有前导零                 |
   | `S`    | 0-9              | 毫秒，一位数                         |
   | `SS`   | 00-99            | 毫秒，两位数                         |
   | `SSS`  | 000-999          | 毫秒，三位数                         |
   | `A`    | AM PM            | 上午，下午，大写                     |
   | `a`    | am pm            | 上午，下午，小写                     |
   |`TS10`|1670833549|10位Unix时间戳格式|
   |`TS13`|1670833590378|13位Unix时间戳格式|