# 路由表

## 基本概念

路由表是一系列路由规则的集合，用于控制合作私有网络中子网的流量流出路径。合作路由表共有两种类型的路由表：默认路由表和自定义路由表。随合作私有网络创建时自动创建的路由表为默认路由表，您自主创建的路由表为自定义路由表。每个子网都必须关联一张路由表且只能关联一张路由表，每张路由表可以关联多个子网，配额请参考[使用限制](../Restrictions.md)。

### 路由表类型

合作路由表分默认路由表和自定义路由表，随私有网络创建时自动创建的路由表为默认路由表，默认路由表占路由表配额，由用户主动创建的路由表为自定义路由表。默认路由表和自定义路由表具有2条默认路由策略：
- 用于VPC内网访问的Local规则；
- 用于Internet访问的Internet规则；


### 路由策略

路由表由一系列路由策略组成，路由策略用来控制子网中数据包的路由途径。每条路由策略包含三个参数：路由策略由路由的目的端、下一跳类型和下一跳地址组成，

| 属性       | 说明                                                         | 示例                 |
| :--------- | :----------------------------------------------------------- | :------------------- |
| 目的端     | 目的网段描述（仅支持网段格式，如果希望目的端为单个IP，可设置掩码为`32`（如：IPv4：`192.168.10.10/32`），目的端网段不支持路由表所在VPC内的网段及子集，目的端为VPC内网地址的数据包将按Local规则进行路由 | 10.0.1.41/24         |
| 下一跳类型 | 私有网络流量的出口，如云主机| 云主机        |
| 下一跳     | 基于下一跳类型的下一跳路由实例                               | 云主机 |
| 路由类型   | 包括静态路由和动态路由                                       | 默认为静态路由       |

> 路由表支持弹性网卡功能处于灰度中，目前支持华东-上海地域，如需使用请提[工单申请](https://ticket.jdcloud.com/applyorder/submit)。

其中Internet用于公网访问，通过公网IP进行Internet通信的实例必须配置该条路由，云主机可作为公网网关使用，详见访问Internet，从控制台自定义的路由类型均为静态路由。


## 使用限制

- 默认路由表不支持删除。默认路由表将随合作私有网络的释放而删除。
- 自定义路由表如有关联子网，则不支持删除，若您需要删除需先解除关联子网。
- 所有路由表均包含Local 和Internet 两条默认路由策略，Local路由表示私有网络内网互通。Internet路由表示支持访问公网，默认路由策略不可修改和删除。
- 每张路由表可以关联同一个VPC中的多个子网，每个子网能关联且只能关联一张路由表。您可以在子网侧更改关联的路由表，也能在路由表侧更改关联子网。
- 自定义路由表的默认配额为0，若您需要提升配额自定义路由表，请[提交工单](https://ticket.jdcloud.com/applyorder/submit)申请。
- 当路由表中存在多条路由策略时，路由优先级由高至低分别为： Local路由>>最长前缀（掩码最长的前缀）匹配。


## 相关参考

- [配置路由表](../../Operation-Guide/Route-Table-Configuration.md)
- [使用限制](../Restrictions.md)

