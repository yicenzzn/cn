# 创建容器实例

**前提条件**

1、在创建容器实例前，您需要完成以下步骤  
2、注册京东云账号并激活、认证账号，可分别访问[注册京东云](https://accounts.jdcloud.com/p/regPage?source=jdcloud%26ReturnUrl=%2f%2fuc.jdcloud.com%2fpassport%2fcomplete%3freturnUrl%3d//www.jdcloud.com/)、[登录京东云](https://console.jdcloud.com/overview)、[实名认证](https://uc.jdcloud.com/account/verify)进行操作；  
3、若您需要创建按配置计费实例，您需要保证您的余额不低于50元，若当前余额不足请进行[充值](https://uc.jdcloud.com/cost/capital/recharg)；  
4、您必选先创建私有网络、子网；  
5、若您需要使用安全组进行实例的安全访问控制，您可预先创建安全组或重新配置安全组出站规则、入站规则。  

**操作步骤**

 1. 打开控制台，选择[弹性计算>>容器服务>>容器实例](https://cns-console.jdcloud.com/host/container/list)；  
 2. 选择创建容器实例所属地域，点击“创建”按钮，进入容器实例购买页面，建议您根据业务情况选择实例所在地域及可用区；  
 备注：目前支持华北-北京、、华东-上海、华南-广州地域，其他地域上线时间，敬请期待。  
 3. 选择计费模式：包年包月和按配置计费，包年包月按月付费购买资源，按配置计费按实际使用的时长（精确至秒）进行计费。关于两种计费方式的区别，请查阅[计费规则](https://docs.jdcloud.com/cn/native-container/billing-rules)。  
 4. 地域与可用区选择：在此步骤仍可以选择容器对应的地域（华北-北京）及可用区，请注意“不同地域资源内网不互通，创建之后不可更改”，如果所选地域限额已满，可以通过提交工单提升限额。  
 5. 选择镜像：  
    选择镜像，您可以选择京东云镜像或第三方镜像；  
    - 京东云镜像：**推荐使用该方式**；镜像保存在京东云容器镜像仓库中，与容器实例服务无缝集成，实现高速镜像下载；选择当前地域已添加的仓库和镜像；如果当前地域未创建任何仓库，可点击新建注册表按钮跳转到注册表创建页，详情参考[容器镜像仓库帮助中心](https://docs.jdcloud.com/cn/container-registry/product-overview)  
    - 第三方镜像：docker.io或仓库认证信息对应的镜像仓库地址。默认为docker.io，**选择docker.io将基于Docker Hub提供的官方镜像**如centos、nginx等，创建容器；选择仓库认证信息后将基于对应的镜像仓库提供的公有或私有镜像创建容器。未添加任何仓库认证信息时，京东云将默认使用Docker Hub获取容器镜像；如需使用第三方私有镜像仓库，您需要先将仓库认证信息添加到京东云，选择添加第三方镜像仓库认证信息到京东云。**注意事项：** 在Docker Hub用户创建的镜像，无论公有镜像或者私有镜像，都需要添加第三方仓库认证才能创建成功，仓库域名建议该地址：https://index.docker.io 具体详见[创建镜像仓库认证信息](https://docs.jdcloud.com/cn/native-container/create-repository)     
 镜像名称：输入创建容器所需要的镜像名称，例：library/nginx  
 镜像版本：输入镜像的版本，例：latest。  
   - **在填写完第三方镜像信息后，默认会做信息校验，确认镜像存在并能获取镜像，只有通过信息校验完全正确才能创建容器。避免因为信息错误，导致的创建容器不成功**
 6. 选择规格  
京东云云主机的配置支持用户自定义选择：提供通用型、计算优化型、内存优化型、高频计算通用型四种类型，用户可以根据不同业务场景选择实例规格及相应配置，详细请查阅实例配置推荐  
选择其他实例，请选择更换实例规则，进行选择：  
 7. 存储：京东云提供云硬盘作为容器的系统盘和数据盘，云硬盘是采用一盘多备的分布式存储方式，数据可靠性高                
系统盘：提供通用型SSD盘、性能型SSD盘、容量型HDD云盘，容量范围为10-100G；系统盘文件系统格式支持xfs或ext4，创建容器时将根据已选择的文件系统格式对容器的系统盘进行格式化；系统盘的挂载目录为根目录“/”且不可修改；目前系统盘必须跟随容器删除；    
数据盘：提供通用型SSD盘、性能型SSD盘、容量型HDD云盘，挂载七块数据盘，只支持创建时关联数据盘。       
  云硬盘费用与实例独立，产品及价格详见[云硬盘](https://docs.jdcloud.com/cn/cloud-disk-service/product-overview)   
 8. 选择网络  
选择“私有网络”及“子网”，选择子网后，可以判断该子网下，还有可以创建的云主机数量，如果暂时没有子网，可以通过快速入口新建子网，并在“云主机网络”进行选择，详细请查阅私有网络和子网。  
内网IP：有两种模式自动分配和自定义。默认为自动分配，将由系统为容器自动分配内网IP，且不可修改；可选择自定义，需要输入内网IP，在您子网CIDR指定内网IP范围内的IP地址，若选择自定义内网IP，暂不支持批量创建容器实例。  
启用IPv6，若选择启用IPv6地址，则原生容器启动后会自动获取一个IPv6地址。   
选择对应的已创建的安全组，安全组为必选项，安全组也可以通过快速入口创建，详细请查阅创建安全组，完成创建后，在“网络”进行选择。   
 9. 带宽：  
京东云提供的公网IP带宽类型为按固定带宽计费及按使用流量计费，按固定带宽计费按购买时设置的带宽上限值计费，而与您实例当前实时访问公网带宽无关，按使用流量计费则根据您实时访问公网的实际流量计费。目前在华北-北京只提供BGP。  
带宽范围为：1Mbps~200Mbps，在创建容器实例过程中可以暂不购买公网IP，完成容器创建后，再进行绑定。  
 公网IP带宽费用与实例费用独立。具体信息请查阅[公网IP](https://docs.jdcloud.com/cn/elastic-ip/product-overview)。
 10. 高级设置  
为非必填项，为您创建容器提供高级选项。你可以根据需要对高级设置中的选项进行选择性定义；  
运行的命令：输入启动容器时运行的第一条Entrypoint指令，将覆盖镜像中设置的Entrypoint指令；  
运行的参数：输入启动容器时运行的第一条CMD指令，将覆盖镜像中设置的CMD指令；如已在运行的命令中设置了Entrypoint指令，该条指令将会附加到Entrypoint指令的参数中被执行；  
环境变量：设置容器运行时的环境变量。可以为每一个容器设置多组环境变量，每一组环境变量的键和值必须一一对应；容器启动后可使用env命令查看容器的环境变量；点击+按钮，添加一组环境变量；点击“删除”按钮删除一组环境变量；  
工作目录：设置容器的工作目录。容器的工作目录必须是绝对路径，以/开始且不能包含“:”、“.”字符；如不设置，默认使用根目录“/”作为容器的工作目录  
主机名：设置容器的主机名；如不设置，则使用容器ID作为主机名；  
启动项：点击按钮开启或关闭TTY；默认情况下TTY为关闭状态；开启后将为容器分配一个伪终端，打印容器的Stdin、Stdout、Stderror信息；  
 11. 域名和IP映射  
为非必填项，在容器hosts文件中增加一组域名和IP映射；点击删除按钮，删除一组域名和IP映射；点击+按钮，增加一组域名和IP映射。  
 12. 基本信息  
名称：为必填项，只支持中文、数字、大小写字母、英文下划线“_”及中划线“-”，且不能超过32字符；如果为批量创建购买，名称会以“xxx1”、“xxx2”依次显示。   
描述：为非必填项，您可按需设置，容器描述最长不能超过256字符；  
标签：为非必填项，您可按需设置，每个标签由 1 个“键”和 1 个“值”组成，标签键值不能以 "jrn:" “jdc-”开头，仅支持中文，大小写英文、数字及如下符号“ _.,:/=+-@ ”。最多能够绑定10个标签至本次创建的容器。如果为批量创建购买，标签将与批量创建出的容器相绑定。关于标签相关说明请参考[标签概述](https://docs.jdcloud.com/cn/tag-service/product-overview)；<br>
资源组：为必填项，您可以将您创建的容器加入资源组，资源组是京东云资源分组管理的工具，支持对云资源进行逻辑分组。系统会为每个用户创建一个“默认资源组”，所有未指定资源组（包括创建时缺省此配置或在资源组功能上线前创建的）容器均会自动加入“默认资源组”。关于资源组相关说明请参考[资源组概述](https://docs.jdcloud.com/cn/resourcegroup/productintroduction)。
 13. 确认容器数量及购买时长  
购买数量受限该地域您容器、云硬盘、公网IP限额以及所选子网剩余IP数量，若限额不够，可通过提交工单提升限额。  
若购买包年包月实例，则需要设置购买时长，最短为1个月，最长为3年。若需要更长服务时长请提交工单。  
  14. 完成容器相关配置之后，点击【立即购买】完成支付后即可进入[控制台>>弹性计算>>容器服务>>容器实例](https://cns-console.jdcloud.com/host/container/list)，查看创建的容器。  
