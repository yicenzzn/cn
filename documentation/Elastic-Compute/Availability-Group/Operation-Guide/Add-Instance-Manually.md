# 手动新增实例

当选择高可用组来部署业务时，需要向高可用组内添加实例，高可用组支持新增实例和添加已有实例。创建实例需先进行实名认证，若您需要创建按配置计费的实例，您还需要保证您账户余额+可用代金券需大于50元。您可以手动也可通过自动伸缩功能自定义高可用组内新增实例，若您选择手动新增，则需按以下步骤操作：

## 前提条件及限制

- 已有实例须处于“运行中”或“已停止”状态才可加入高可用组
- 若您的高可用组为物理机或交换机置放策略的：当达到组内实例数上限时，将无法加入新实例；如底层硬件不足够使实例分散，部分实例将加入失败。
- 仅已停止状态的实例支持强制均衡高可用组
- 不支持专属宿主机上的实例和裸金属实例加入高可用组
- 仅支持与当前高可用组可用区匹配且与其关联的实例模板vpc相同的实例加入高可用组
- 本地系统盘实例加入高可用组时不支持强制均衡 
- 带本地数据盘的实例实例若需强制均衡加入高可用组，需要您确认清空本地数据盘数据，且数据无法找回


## 操作步骤

### 新增实例

1. 访问[高可用组控制台](https://cns-console.jdcloud.com/availabilitygroup/list)，即进入高可用组列表页面。或访问[京东云控制台](https://console.jdcloud.com)点击左侧导航栏【弹性计算】-【高可用组】进入高可用组列表页。
2. 选择地域。
3. 找到需要新增实例的高可用组。
4. 点击【新增实例】，将跳转至实例创建页面，且创建方式为“在高可用组内创建”，对应高可用组选中为对应高可用组，如：Web服务高可用组。将根据高可用组所关联的启动模板内配置的信息匹配至当前页面。但需注意这些配置信息不允许修改。
5. 您可以选择不同计费类型及购买数量，计费类型分为包年包月或按配置计费，若购买包年包月实例您需要指定购买时长。
6. 若您单次仅新增一台实例，则您还可以指定其内网IP地址，需注意的是内网地址需在对应子网CIDR范围内。
7. 设置实例名称及描述；
8. 完成以上配置后，点击【立即购买】，对于包年包月实例完成之后即可在高可用组详情页或实例列表页查看创建的实例，对于按配置计费实例则将直接触发创建。实例从创建到可用将有几分钟时间，还请耐心等待。

若高可用组关联的实例模板配置了已经部署好业务且配置了开机自启动的私有镜像，当您完成新增实例时可认为您获得了一组可对外服务的且高可用的实例组。

### 添加已有实例
1. 访问[高可用组控制台](https://cns-console.jdcloud.com/availabilitygroup/list)，即进入高可用组列表页面。或访问[京东云控制台](https://console.jdcloud.com)点击左侧导航栏【弹性计算】-【高可用组】进入高可用组列表页。
2. 选择地域。
3. 找到需要添加已有实例的高可用组。
4. 点击【更多】-【添加已有实例】。
5. 在弹出的弹窗中，选择期望加入的实例，可通过右上方筛选栏的实例名称、实例ID或内网IPv4进行搜索。选择实例后并设置实例是否强制均衡，强制均衡的设置影响如下：

    - 是：可能会变更实例所在宿主机，仅”已停止“状态的云主机支持该操作。
    - 否：不会变更实例所在宿主机，可能会导致高可用组内实例分布不均 。

![image](https://user-images.githubusercontent.com/88134774/155539096-710ab6de-ad41-498f-b0fd-2a0453f018c7.png)


## 相关参考

[创建实例](../../Virtual-Machines/Operation-Guide/Instance/Create-Instance.md)

[调整实例高可用组](https://docs.jdcloud.com/cn/virtual-machines/api/modifyinstanceplacement?content=API)
